# SettingsModal 리팩토링 수동 테스트 체크리스트

**작성일**: 2026-01-10
**목적**: 각 Phase별 리팩토링 후 기능 회귀 방지

---

## Phase 1: UserDetailModal 분리

### 테스트 환경 설정
- [ ] Master 계정으로 로그인
- [ ] SettingsModal 열기 (설정 아이콘 클릭)
- [ ] Permissions → Users 탭으로 이동

### 1. 사용자 상세 모달 열기
- [ ] **승인된 사용자 클릭**: 사용자 행 클릭 시 UserDetailModal 표시
- [ ] **모달 제목**: 선택한 사용자 이름 표시
- [ ] **모달 내용**: 사용자 정보 (이메일, 역할, 부서 권한) 표시
- [ ] **닫기 버튼**: X 아이콘 클릭 시 모달 닫힘
- [ ] **ESC 키**: ESC 키 누르면 모달 닫힘
- [ ] **외부 클릭**: 모달 바깥 영역 클릭 시 닫힘

### 2. 역할 변경 (Master만 가능)
- [ ] **역할 드롭다운 표시**: Master/Admin/Normal User 옵션 표시
- [ ] **현재 역할 선택됨**: 사용자의 현재 역할이 기본 선택
- [ ] **역할 변경 선택**: Admin으로 변경
- [ ] **저장 버튼 활성화**: 변경 후 "저장" 버튼 활성화
- [ ] **저장 실행**: 저장 클릭 시 Firebase 업데이트
- [ ] **성공 피드백**: 토스트 메시지 표시
- [ ] **모달 닫힘**: 저장 후 모달 자동 닫힘
- [ ] **목록 업데이트**: 사용자 목록에서 역할 배지 변경됨

### 3. 부서별 권한 변경
- [ ] **부서 목록 표시**: 모든 부서가 나열됨
- [ ] **현재 권한 표시**: 각 부서별 현재 권한 (View/Edit/Block) 표시
- [ ] **View 선택**: 특정 부서를 View로 변경
  - [ ] 아이콘: Eye 표시
  - [ ] 색상: 파란색
- [ ] **Edit 선택**: 특정 부서를 Edit로 변경
  - [ ] 아이콘: Edit 표시
  - [ ] 색상: 초록색
- [ ] **Block 선택**: 특정 부서를 Block으로 변경
  - [ ] 아이콘: EyeOff 표시
  - [ ] 색상: 회색
- [ ] **저장 실행**: 부서 권한 변경 후 저장
- [ ] **Firebase 업데이트**: departmentPermissions 필드 업데이트 확인

### 4. 사용자 삭제
- [ ] **삭제 버튼 표시**: 빨간색 "사용자 삭제" 버튼 존재
- [ ] **본인 삭제 불가**: 현재 로그인한 사용자는 삭제 버튼 비활성화
- [ ] **다른 사용자 삭제**: 다른 사용자 선택 시 삭제 버튼 활성화
- [ ] **확인 다이얼로그**: 삭제 버튼 클릭 시 확인 메시지 표시
- [ ] **삭제 실행**: 확인 후 Firebase에서 사용자 문서 삭제
- [ ] **목록 업데이트**: 삭제된 사용자가 목록에서 사라짐
- [ ] **모달 닫힘**: 삭제 후 모달 자동 닫힘

### 5. 사용자 일정 조회
- [ ] **일정 보기 버튼**: "일정 보기" 버튼 존재
- [ ] **MyEventsModal 열림**: 버튼 클릭 시 해당 사용자의 일정 모달 표시
- [ ] **일정 목록 표시**: 사용자가 생성한 일정들 나열됨
- [ ] **모달 닫기**: MyEventsModal 닫으면 UserDetailModal로 복귀

### 6. 권한 체크
- [ ] **Master 권한**: 모든 기능 접근 가능
  - [ ] 역할 변경 가능
  - [ ] 부서 권한 변경 가능
  - [ ] 사용자 삭제 가능
- [ ] **Admin 권한**: 제한된 기능만
  - [ ] 역할 변경 불가 (드롭다운 비활성화)
  - [ ] 부서 권한 변경 가능 (본인 부서만)
  - [ ] 사용자 삭제 불가
- [ ] **Normal User**: 설정 모달 접근 불가

### 7. 에러 처리
- [ ] **네트워크 오류**: Firebase 연결 끊김 시 에러 메시지 표시
- [ ] **권한 없음**: 권한 없는 작업 시도 시 경고 메시지
- [ ] **잘못된 입력**: 빈 값으로 저장 시도 시 검증 실패

### 8. UI/UX
- [ ] **로딩 상태**: 저장 중 로딩 스피너 표시
- [ ] **버튼 비활성화**: 저장 중 모든 버튼 비활성화
- [ ] **반응형**: 작은 화면에서도 정상 동작
- [ ] **스크롤**: 많은 부서 목록도 스크롤 가능

---

## 테스트 결과

### Phase 1 테스트 결과
- **실행일**: _____
- **테스터**: _____
- **통과/실패**: _____ / _____
- **발견된 이슈**:
  -

---

## 회귀 테스트 (Phase 1 완료 후)

### 기존 기능 정상 동작 확인
- [ ] **부서 관리**: 부서 추가/수정/삭제 정상 동작
- [ ] **사용자 목록**: 사용자 검색, 필터링 정상 동작
- [ ] **다른 탭들**: Teachers, Classes, System 탭 정상 동작
- [ ] **저장 기능**: 배치 저장 ("저장" 버튼) 정상 동작

---

## 참고사항

### 테스트 데이터 준비
1. **사용자**: 최소 3명 (Master 1명, Admin 1명, Normal User 1명)
2. **부서**: 최소 5개 (각기 다른 카테고리)
3. **일정**: 테스트 사용자별로 2-3개 일정 생성

### 테스트 순서
1. Phase 1 체크리스트 완료
2. 회귀 테스트 실행
3. 이슈 발견 시 즉시 수정
4. 모든 항목 통과 후 Phase 2 진행

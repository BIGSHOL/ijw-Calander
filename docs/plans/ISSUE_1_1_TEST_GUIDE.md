# Issue 1.1 수동 테스트 가이드

**작업명**: Props 그룹화 (37개 → 18개)
**완료일**: 2026-01-11
**커밋**: fb6c1f4
**브랜치**: refactor/settings-modal-split

---

## 📋 테스트 개요

DepartmentsManagementTab의 props를 그룹화하여 유지보수성을 향상시켰습니다. 모든 기능이 정상 작동하는지 확인하기 위한 수동 테스트가 필요합니다.

### 변경 사항 요약
- Props 수: 37개 → 18개 (51% 감소)
- 그룹화된 state: 3개 (newDepartmentForm, categoryManagement, departmentFilterState)
- 영향 받는 컴포넌트: DepartmentsManagementTab, SettingsModal

---

## 🚀 테스트 환경 설정

### 1. 개발 서버 실행
```bash
npm run dev
```

### 2. 브라우저 접속
- URL: http://localhost:5173
- 권장 브라우저: Chrome, Firefox, Edge

### 3. 로그인
- **권장 계정**: admin 또는 master 권한 계정
- 부서 관리 권한이 있는 계정 필요

### 4. 설정 모달 열기
1. 우측 상단 설정 아이콘 클릭
2. "부서 관리" 탭 선택

---

## ✅ 테스트 체크리스트

### A. 카테고리 관리 (Category Management)

#### A-1. 카테고리 추가
- [ ] **단계**:
  1. "새 카테고리" 입력 필드에 텍스트 입력 (예: "신규부서")
  2. 파란색 "+" 버튼 클릭
- [ ] **예상 결과**:
  - 카테고리가 목록에 추가됨
  - 입력 필드가 자동으로 비워짐
  - 카테고리가 알파벳 순으로 정렬됨

#### A-2. 빈 카테고리 추가 시도
- [ ] **단계**:
  1. 입력 필드를 비운 채로 "+" 버튼 클릭
- [ ] **예상 결과**:
  - 경고 알림: "카테고리 이름을 입력해주세요."

#### A-3. 중복 카테고리 추가 시도
- [ ] **단계**:
  1. 이미 존재하는 카테고리 이름 입력
  2. "+" 버튼 클릭
- [ ] **예상 결과**:
  - 경고 알림: "이미 존재하는 카테고리입니다."

#### A-4. 카테고리 삭제
- [ ] **단계**:
  1. 카테고리 태그 우측의 "X" 버튼 클릭
  2. 확인 대화상자에서 "확인" 클릭
- [ ] **예상 결과**:
  - 카테고리가 목록에서 제거됨
  - 해당 카테고리를 사용하는 부서는 영향 없음 (미등록 표시)

#### A-5. 빈 카테고리 목록 표시
- [ ] **단계**:
  1. 모든 카테고리 삭제
- [ ] **예상 결과**:
  - "등록된 카테고리가 없습니다." 메시지 표시

---

### B. 부서 검색 (Department Search)

#### B-1. 부서명으로 검색
- [ ] **단계**:
  1. 검색 필드에 부서명 일부 입력 (예: "개발")
- [ ] **예상 결과**:
  - 입력한 텍스트를 포함하는 부서만 표시됨
  - 실시간으로 필터링 적용됨

#### B-2. 검색어 지우기
- [ ] **단계**:
  1. 검색 필드의 텍스트 전체 삭제
- [ ] **예상 결과**:
  - 모든 부서 목록이 다시 표시됨

#### B-3. 존재하지 않는 부서 검색
- [ ] **단계**:
  1. 존재하지 않는 부서명 입력
- [ ] **예상 결과**:
  - 부서 목록이 비어있음

---

### C. 부서 생성 (Department Creation)

#### C-1. 생성 폼 열기
- [ ] **단계**:
  1. "새 부서 만들기" 버튼 클릭
- [ ] **예상 결과**:
  - 노란색 테두리의 생성 폼이 나타남
  - "새 부서 만들기" 버튼이 사라짐

#### C-2. 부서 생성 - 전체 정보 입력
- [ ] **단계**:
  1. 부서명 입력 (예: "테스트부서")
  2. 카테고리 선택 (드롭다운)
  3. 기본 배경 색상 선택 (color picker)
  4. 기본 글자 색상 선택
  5. 기본 테두리 색상 선택
  6. 기본 권한 선택 (👁️ 조회 / 🚫 차단 / ✏️ 수정)
  7. "생성" 버튼 클릭
- [ ] **예상 결과**:
  - 부서가 목록 하단에 추가됨
  - 생성 폼이 닫힘
  - 폼 데이터가 초기화됨
  - 알림 또는 성공 메시지 표시

#### C-3. 부서 생성 - 빈 부서명
- [ ] **단계**:
  1. "새 부서 만들기" 버튼 클릭
  2. 부서명 입력 없이 "생성" 버튼 클릭
- [ ] **예상 결과**:
  - 생성되지 않음 (아무 일도 일어나지 않음)

#### C-4. 부서 생성 - 기본값 확인
- [ ] **단계**:
  1. "새 부서 만들기" 버튼 클릭
  2. 초기 표시된 값 확인
- [ ] **예상 결과**:
  - 기본 배경: #ffffff (흰색)
  - 기본 글자: #000000 (검은색)
  - 기본 테두리: #fee2e2 (연한 빨강)
  - 기본 권한: 👁️ 조회 (view)

#### C-5. 생성 폼 취소
- [ ] **단계**:
  1. "새 부서 만들기" 버튼 클릭
  2. 일부 정보 입력
  3. "취소" 버튼 클릭
- [ ] **예상 결과**:
  - 생성 폼이 닫힘
  - 입력한 데이터가 저장되지 않음
  - "새 부서 만들기" 버튼이 다시 나타남

#### C-6. 생성 후 폼 초기화 확인
- [ ] **단계**:
  1. 부서 생성 후 다시 "새 부서 만들기" 버튼 클릭
- [ ] **예상 결과**:
  - 모든 필드가 초기값으로 리셋되어 있음

---

### D. 부서 드래그 정렬 (Department Drag & Drop)

#### D-1. 부서 드래그
- [ ] **단계**:
  1. 부서 항목 좌측의 드래그 핸들(≡ 아이콘) 클릭 및 드래그
  2. 다른 위치로 이동
  3. 마우스 버튼 놓기
- [ ] **예상 결과**:
  - 드래그 중 해당 행이 반투명해짐 (opacity 50%)
  - 드롭 시 부서 순서가 변경됨
  - 순서 변경이 서버에 저장됨

#### D-2. 드래그 시각 피드백
- [ ] **단계**:
  1. 부서 드래그 시작
- [ ] **예상 결과**:
  - 드래그 중인 항목: 배경색 회색, opacity 50%
  - 커서가 grab cursor로 변경됨

#### D-3. 권한 없는 사용자의 드래그
- [ ] **단계**:
  1. 편집 권한이 없는 계정으로 로그인
  2. 부서 목록 확인
- [ ] **예상 결과**:
  - 드래그 핸들(≡)이 표시되지 않음
  - 드래그 불가능

---

### E. 부서 편집 (Department Editing)

#### E-1. 부서명 수정
- [ ] **단계**:
  1. 부서명 클릭
  2. 텍스트 수정
  3. 포커스 이동 (다른 곳 클릭)
- [ ] **예상 결과**:
  - 수정된 부서명이 표시됨
  - 저장 버튼 활성화 (modal 상단)

#### E-2. 카테고리 변경
- [ ] **단계**:
  1. 카테고리 드롭다운 클릭
  2. 다른 카테고리 선택
- [ ] **예상 결과**:
  - 선택한 카테고리로 변경됨
  - 저장 버튼 활성화

#### E-3. 색상 변경
- [ ] **단계**:
  1. 색상 선택기 (4개) 각각 클릭하여 변경
  2. 색상 선택
- [ ] **예상 결과**:
  - 선택한 색상이 즉시 반영됨
  - 저장 버튼 활성화

#### E-4. 읽기 전용 모드 (권한 없음)
- [ ] **단계**:
  1. 편집 권한이 없는 부서 확인
- [ ] **예상 결과**:
  - 입력 필드가 읽기 전용 (회색 배경)
  - 드롭다운 대신 텍스트로 표시
  - 색상 선택기 비활성화

---

### F. 부서 삭제 (Department Deletion)

#### F-1. 부서 삭제
- [ ] **단계**:
  1. 부서 우측의 휴지통 아이콘 클릭
  2. 확인 대화상자에서 "확인" 클릭
- [ ] **예상 결과**:
  - 부서가 목록에서 제거됨
  - Firebase에서 즉시 삭제됨

#### F-2. 삭제 권한 확인
- [ ] **단계**:
  1. 삭제 권한이 없는 계정으로 로그인
  2. 부서 목록 확인
- [ ] **예상 결과**:
  - 휴지통 아이콘이 표시되지 않음

---

### G. 통합 시나리오 (Integration Scenarios)

#### G-1. 전체 워크플로우
- [ ] **단계**:
  1. 카테고리 2개 추가 ("개발", "디자인")
  2. 각 카테고리로 부서 1개씩 생성
  3. 부서 검색으로 필터링
  4. 부서 드래그로 순서 변경
  5. 부서 정보 수정
  6. 변경사항 저장
  7. 모달 닫기
  8. 다시 열어서 변경사항 확인
- [ ] **예상 결과**:
  - 모든 단계가 오류 없이 진행됨
  - 변경사항이 영구적으로 저장됨

#### G-2. 여러 사용자 동시 작업
- [ ] **단계**:
  1. 두 개의 브라우저 창에서 다른 계정으로 로그인
  2. 한 창에서 부서 추가
  3. 다른 창에서 새로고침 또는 재접속
- [ ] **예상 결과**:
  - 다른 창에도 변경사항이 반영됨

---

## 🐛 알려진 이슈 및 제한사항

### 현재 알려진 이슈
- 없음 (모든 기능 정상 작동 예상)

### 기술적 제한사항
1. **TypeScript 컴파일 에러**:
   - 프로젝트 설정 문제로 `tsc --noEmit` 실행 시 에러 발생
   - 실제 런타임에는 영향 없음
   - skills 폴더의 template 파일 관련 에러

2. **권한 시스템**:
   - 'block' 값은 legacy 지원용 (새로운 타입은 'none' 사용)
   - 하위 호환성 유지

---

## 📊 테스트 결과 기록

### 테스트 실행 정보
- **테스터**: _________________
- **테스트 일시**: _________________
- **브라우저**: _________________
- **계정 권한**: _________________

### 결과 요약
### 결과 요약
- **통과**: 부서 검색 (B), 부서 UI 반영 (Creation/Deletion UI 동작)
- **실패**: 데이터 영속성 (저장 후 새로고침 시 초기화)
- **차단**: Rate Limit으로 인한 최종 검증 중단

### 발견된 버그
| # | 카테고리 | 설명 | 심각도 | 재현 단계 |
|---|---------|------|--------|----------|
| 1 | 영속성 | 부서 삭제 후 '변경사항 저장' 시, 다른 변경사항까지 저장 실패 (Batch Update Error 추정) | Critical | 부서 삭제 -> 다른 부서 수정 -> 저장 -> 새로고침 -> 초기화됨 |
| 2 | UI | 카테고리/부서 생성 후 폼이 닫히지 않거나 데이터가 즉시 반영되지 않는 현상 (위 에러의 여파) | Major | 부서 생성 -> 생성 버튼 클릭 -> 폼 유지됨 |

### 조치 내역 (Fix Applied)
| # | 수정 파일 | 내용 | 상태 |
|---|----------|------|------|
| 1 | SettingsModal.tsx | `handleDelete` 시 `localDepartments` 상태도 즉시 업데이트하도록 수정 (삭제된 문서에 대한 불필요한 Update 방지) | **수정 완료** (재검증 필요) |

---

## 📝 추가 확인 사항

### Console 에러 확인
- [ ] 브라우저 개발자 도구 열기 (F12)
- [ ] Console 탭에서 에러 메시지 확인
- [ ] 에러가 있다면 스크린샷 저장

### Network 요청 확인
- [ ] Network 탭에서 Firebase 요청 확인
- [ ] 실패한 요청이 있는지 확인
- [ ] 응답 시간이 정상적인지 확인

### 모바일 반응형 (Optional)
- [ ] 브라우저 창 크기 조절하여 반응형 확인
- [ ] 모바일 화면 크기에서 정상 작동 확인

---

## ✅ 테스트 승인

### 테스트 완료 조건
- [ ] 모든 체크리스트 항목 테스트 완료
- [ ] Critical 버그 0건
- [ ] Major 버그 0건
- [ ] Console 에러 없음

### 승인자
- **이름**: _________________
- **직책**: _________________
- **서명**: _________________
- **일시**: _________________

---

## 🔗 관련 문서

- [Phase 1-2 Code Review](PHASE1_2_CODE_REVIEW.md)
- [Session Summary 2026-01-11](SESSION_SUMMARY_2026_01_11.md)
- [Issue 1.1 상세 내역](PHASE1_2_CODE_REVIEW.md#issue-11-props-그룹화-critical)

---

**문서 버전**: 1.0
**최종 수정일**: 2026-01-11
**작성자**: Claude Sonnet 4.5

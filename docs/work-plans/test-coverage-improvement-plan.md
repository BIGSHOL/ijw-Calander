# ğŸ“ˆ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¦ê°€ ê³„íš

**ì‘ì„±ì¼**: 2026-02-07  
**ëª©í‘œ**: ì „ì²´ ì»¤ë²„ë¦¬ì§€ 60% â†’ 80% ë‹¬ì„±  
**ì˜ˆìƒ ê¸°ê°„**: 2ì£¼ (Phaseë³„ ìˆœì°¨ ì§„í–‰)

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¶„ì„

### ì»¤ë²„ë¦¬ì§€ í˜„í™© (2026-02-07)

| ì˜ì—­ | Statements | Branches | Functions | Lines | ìƒíƒœ |
|------|------------|----------|-----------|-------|------|
| **ì „ì²´** | 60.63% | 65.31% | 61.61% | 60.98% | âš ï¸ |
| `utils/` | 93.13% | 91.16% | 98.96% | 92.5% | âœ… |
| `hooks/` | 47.79% | 41.31% | 44.51% | 49.07% | âš ï¸ |
| ë£¨íŠ¸ íŒŒì¼ | 18.75% | 60.58% | 26.08% | 19.48% | âŒ |

### í…ŒìŠ¤íŠ¸ íŒŒì¼ í˜„í™©

#### í˜„ì¬ ì‘ì„±ëœ í…ŒìŠ¤íŠ¸ (19ê°œ)

**utils/ (14ê°œ)** âœ…
- `attendanceNumberGenerator.test.ts`
- `converters.test.ts`
- `dateUtils.test.ts`
- `encryption.test.ts`
- `formValidation.test.ts`
- `ganttHelpers.test.ts`
- `ganttToCalendar.test.ts`
- `localStorage.test.ts`
- `roleHelpers.test.ts`
- `staffHelpers.test.ts`
- `studentUtils.test.ts`
- `styleUtils.test.ts`
- `teacherUtils.test.ts`
- `testHelpers.tsx`

**hooks/ (5ê°œ)** âš ï¸
- `useAttendance.test.ts`
- `useClasses.test.ts`
- `useConsultations.test.ts`
- `useGlobalSearch.test.ts`
- `useStudents.test.ts`

**components/ (0ê°œ)** âŒ
- í…ŒìŠ¤íŠ¸ ì—†ìŒ

---

## ğŸ¯ ëª©í‘œ ì»¤ë²„ë¦¬ì§€

| ì˜ì—­ | í˜„ì¬ | ëª©í‘œ | ì¦ê°€ëŸ‰ |
|------|------|------|--------|
| Statements | 60.63% | 80% | +19.37% |
| Branches | 65.31% | 80% | +14.69% |
| Functions | 61.61% | 80% | +18.39% |
| Lines | 60.98% | 80% | +19.02% |

---

## ğŸ“… Phaseë³„ ì‹¤í–‰ ê³„íš

### Phase 1: Hooks í…ŒìŠ¤íŠ¸ í™•ì¥ (47ê°œ ì¶”ê°€)
**ì˜ˆìƒ ê¸°ê°„**: 3-4ì¼  
**ëª©í‘œ**: hooks ì»¤ë²„ë¦¬ì§€ 48% â†’ 80%

#### ìš°ì„ ìˆœìœ„ 1 (í•µì‹¬ í›…) - 15ê°œ

| í›… | í¬ê¸° | ë³µì¡ë„ | ìš°ì„ ìˆœìœ„ |
|----|------|--------|---------|
| `useAuth.ts` | 6KB | ë†’ìŒ | ğŸ”´ í•„ìˆ˜ |
| `usePermissions.ts` | 6KB | ë†’ìŒ | ğŸ”´ í•„ìˆ˜ |
| `useTabPermissions.ts` | 6KB | ë†’ìŒ | ğŸ”´ í•„ìˆ˜ |
| `useStaff.ts` | 8KB | ì¤‘ê°„ | ğŸ”´ í•„ìˆ˜ |
| `useEnrollments.ts` | 10KB | ì¤‘ê°„ | ğŸ”´ í•„ìˆ˜ |
| `useForm.ts` | 4KB | ë‚®ìŒ | ğŸŸ¡ ê¶Œì¥ |
| `useFocusTrap.ts` | 3KB | ë‚®ìŒ | ğŸŸ¡ ê¶Œì¥ |
| `useAppState.ts` | 15KB | ë†’ìŒ | ğŸŸ¡ ê¶Œì¥ |
| `useBilling.ts` | 6KB | ì¤‘ê°„ | ğŸŸ¡ ê¶Œì¥ |
| `useExams.ts` | 5KB | ì¤‘ê°„ | ğŸŸ¡ ê¶Œì¥ |
| `useStudentGrades.ts` | 7KB | ì¤‘ê°„ | ğŸŸ¡ ê¶Œì¥ |
| `useClassDetail.ts` | 8KB | ì¤‘ê°„ | ğŸŸ¡ ê¶Œì¥ |
| `useSessionPeriods.ts` | 6KB | ì¤‘ê°„ | ğŸŸ¢ ì„ íƒ |
| `useRoleHelpers.ts` | 2KB | ë‚®ìŒ | ğŸŸ¢ ì„ íƒ |
| `useTabHistory.ts` | 3KB | ë‚®ìŒ | ğŸŸ¢ ì„ íƒ |

#### ìš°ì„ ìˆœìœ„ 2 (ë°ì´í„° í›…) - 16ê°œ

| í›… | í¬ê¸° | ì„¤ëª… |
|----|------|------|
| `useClassMutations.ts` | 22KB | ë°˜ CRUD ì‘ì—… |
| `useEventCrud.ts` | 14KB | ì´ë²¤íŠ¸ CRUD |
| `useStudentConsultations.ts` | 13KB | í•™ìƒ ìƒë‹´ |
| `useConsultationStats.ts` | 23KB | ìƒë‹´ í†µê³„ |
| `useWithdrawalStats.ts` | 14KB | í‡´ì› í†µê³„ |
| `useStudentFilters.ts` | 17KB | í•™ìƒ í•„í„°ë§ |
| `useGradeProfile.ts` | 17KB | ì„±ì  í”„ë¡œí•„ |
| `useDailyAttendance.ts` | 10KB | ì¼ì¼ ì¶œì„ |
| `useVisibleAttendanceStudents.ts` | 8KB | ì¶œì„ í•™ìƒ í‘œì‹œ |
| `useEmbedData.ts` | 10KB | ì„ë² ë“œ ë°ì´í„° |
| `useEmbedTokens.ts` | 7KB | ì„ë² ë“œ í† í° |
| `useEnglishClassUpdater.ts` | 34KB | ì˜ì–´ ë°˜ ì—…ë°ì´íŠ¸ |
| `useGanttProjects.ts` | 3KB | ê°„íŠ¸ í”„ë¡œì íŠ¸ |
| `useGanttTemplates.ts` | 7KB | ê°„íŠ¸ í…œí”Œë¦¿ |
| `useResources.ts` | 4KB | ë¦¬ì†ŒìŠ¤ |
| `useTaskMemos.ts` | 4KB | ì‘ì—… ë©”ëª¨ |

#### ìš°ì„ ìˆœìœ„ 3 (ë‚˜ë¨¸ì§€) - 16ê°œ

- `useArchivedEvents.ts`
- `useBatchAttendanceUpdate.ts`
- `useBucketItems.ts`
- `useClassStats.ts`
- `useConsultationDrafts.ts`
- `useConsultationMutations.ts`
- `useExamSeries.ts`
- `useExamsByDate.ts`
- `useFirebaseQueries.ts`
- `useGanttCategories.ts`
- `useGanttDepartments.ts`
- `useGradePromotion.ts`
- `useRoleSimulation.tsx`
- `useStaffLeaves.ts`
- `useStudentBilling.ts`
- `useWithdrawalFilters.ts`

---

### Phase 2: í•µì‹¬ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ (ì‹ ê·œ)
**ì˜ˆìƒ ê¸°ê°„**: 5-7ì¼  
**ëª©í‘œ**: í•µì‹¬ ì»´í¬ë„ŒíŠ¸ 80% ì»¤ë²„ë¦¬ì§€

#### ìš°ì„ ìˆœìœ„ 1 (ê³µí†µ ì»´í¬ë„ŒíŠ¸)

| í´ë” | ì»´í¬ë„ŒíŠ¸ ìˆ˜ | í…ŒìŠ¤íŠ¸ ëŒ€ìƒ |
|------|------------|------------|
| `Common/` | 25ê°œ | Modal, Button, Input, Dropdown, Toast ë“± |
| `Header/` | 8ê°œ | ProfileDropdown, MemoDropdown, NavBar ë“± |
| `Navigation/` | 4ê°œ | Sidebar, TabNavigation |
| `Auth/` | 2ê°œ | LoginModal |

#### ìš°ì„ ìˆœìœ„ 2 (ê¸°ëŠ¥ ì»´í¬ë„ŒíŠ¸)

| í´ë” | ì»´í¬ë„ŒíŠ¸ ìˆ˜ | í…ŒìŠ¤íŠ¸ ëŒ€ìƒ |
|------|------------|------------|
| `StudentManagement/` | 25ê°œ | StudentList, StudentCard, StudentModal |
| `Attendance/` | 17ê°œ | AttendanceTable, AddStudentModal |
| `Dashboard/` | 18ê°œ | KPICard, Charts |

#### ìš°ì„ ìˆœìœ„ 3 (ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸)

| í´ë” | ì»´í¬ë„ŒíŠ¸ ìˆ˜ | í…ŒìŠ¤íŠ¸ ëŒ€ìƒ |
|------|------------|------------|
| `Timetable/` | 59ê°œ | TimetableGrid, TimetableCell |
| `Calendar/` | 17ê°œ | CalendarBoard, EventCard |
| `Gantt/` | 7ê°œ | GanttChart, ProjectBar |

---

### Phase 3: í†µí•© í…ŒìŠ¤íŠ¸
**ì˜ˆìƒ ê¸°ê°„**: 2-3ì¼  
**ëª©í‘œ**: ì£¼ìš” ì‚¬ìš©ì íë¦„ í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ì¸ì¦ íë¦„**
   - ë¡œê·¸ì¸ â†’ ê¶Œí•œ í™•ì¸ â†’ íƒ­ ì ‘ê·¼

2. **í•™ìƒ ë“±ë¡ íë¦„**
   - ìƒë‹´ ë“±ë¡ â†’ ì¬ì›ìƒ ì „í™˜ â†’ ë°˜ ë°°ì •

3. **ì¶œì„ ì²´í¬ íë¦„**
   - í•™ìƒ ì„ íƒ â†’ ì¶œì„ ì²´í¬ â†’ ê¸‰ì—¬ ê³„ì‚°

4. **ì‹œê°„í‘œ ìˆ˜ì • íë¦„**
   - í•™ìƒ ì´ë™ â†’ ì‹œë®¬ë ˆì´ì…˜ â†’ ì €ì¥

---

## ğŸ› ï¸ í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### í…ŒìŠ¤íŠ¸ íŒŒì¼ êµ¬ì¡°

```
tests/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.test.ts          # ìƒˆë¡œ ì‘ì„±
â”‚   â”œâ”€â”€ usePermissions.test.ts   # ìƒˆë¡œ ì‘ì„±
â”‚   â””â”€â”€ ...
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Common/
â”‚   â”‚   â”œâ”€â”€ Modal.test.tsx       # ìƒˆë¡œ ì‘ì„±
â”‚   â”‚   â””â”€â”€ Button.test.tsx      # ìƒˆë¡œ ì‘ì„±
â”‚   â”œâ”€â”€ StudentManagement/
â”‚   â”‚   â””â”€â”€ StudentCard.test.tsx # ìƒˆë¡œ ì‘ì„±
â”‚   â””â”€â”€ ...
â”œâ”€â”€ integration/                  # ìƒˆ í´ë”
â”‚   â”œâ”€â”€ auth-flow.test.ts
â”‚   â””â”€â”€ student-registration.test.ts
â”œâ”€â”€ mocks/
â”‚   â”œâ”€â”€ firebase.ts              # Firebase ëª¨ì˜ ê°ì²´
â”‚   â””â”€â”€ handlers.ts              # API ëª¨ì˜ í•¸ë“¤ëŸ¬
â””â”€â”€ setup.ts
```

### Mock ì„¤ì • ì˜ˆì‹œ

```typescript
// tests/mocks/firebase.ts
export const mockFirestore = {
  collection: vi.fn(),
  doc: vi.fn(),
  getDocs: vi.fn(),
  addDoc: vi.fn(),
  updateDoc: vi.fn(),
  deleteDoc: vi.fn(),
};

export const mockAuth = {
  currentUser: { uid: 'test-uid', email: 'test@example.com' },
  signInWithEmailAndPassword: vi.fn(),
  signOut: vi.fn(),
};
```

### í›… í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿

```typescript
// tests/hooks/useAuth.test.ts
import { renderHook, act, waitFor } from '@testing-library/react';
import { describe, it, expect, vi, beforeEach } from 'vitest';
import { useAuth } from '../../hooks/useAuth';

// Mock Firebase
vi.mock('../../firebaseConfig', () => ({
  auth: mockAuth,
  db: mockFirestore,
}));

describe('useAuth', () => {
  beforeEach(() => {
    vi.clearAllMocks();
  });

  it('ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì •í™•íˆ ë°˜í™˜í•´ì•¼ í•¨', async () => {
    const { result } = renderHook(() => useAuth());
    
    await waitFor(() => {
      expect(result.current.isAuthenticated).toBe(true);
    });
  });

  it('ë¡œê·¸ì•„ì›ƒ ì‹œ ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•¨', async () => {
    const { result } = renderHook(() => useAuth());
    
    await act(async () => {
      await result.current.logout();
    });
    
    expect(result.current.isAuthenticated).toBe(false);
  });
});
```

### ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿

```typescript
// tests/components/Common/Modal.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { Modal } from '../../../components/Common/Modal';

describe('Modal', () => {
  it('isOpenì´ trueì¼ ë•Œ í‘œì‹œë˜ì–´ì•¼ í•¨', () => {
    render(
      <Modal isOpen={true} onClose={vi.fn()}>
        <div>Modal Content</div>
      </Modal>
    );
    
    expect(screen.getByText('Modal Content')).toBeInTheDocument();
  });

  it('X ë²„íŠ¼ í´ë¦­ ì‹œ onCloseê°€ í˜¸ì¶œë˜ì–´ì•¼ í•¨', () => {
    const onClose = vi.fn();
    render(
      <Modal isOpen={true} onClose={onClose}>
        <div>Modal Content</div>
      </Modal>
    );
    
    fireEvent.click(screen.getByRole('button', { name: /close/i }));
    expect(onClose).toHaveBeenCalled();
  });

  it('ESC í‚¤ ì…ë ¥ ì‹œ onCloseê°€ í˜¸ì¶œë˜ì–´ì•¼ í•¨', () => {
    const onClose = vi.fn();
    render(
      <Modal isOpen={true} onClose={onClose}>
        <div>Modal Content</div>
      </Modal>
    );
    
    fireEvent.keyDown(document, { key: 'Escape' });
    expect(onClose).toHaveBeenCalled();
  });
});
```

---

## ğŸ“‹ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: Hooks í…ŒìŠ¤íŠ¸

- [ ] `useAuth.test.ts` ì‘ì„±
- [ ] `usePermissions.test.ts` ì‘ì„±
- [ ] `useTabPermissions.test.ts` ì‘ì„±
- [ ] `useStaff.test.ts` ì‘ì„±
- [ ] `useEnrollments.test.ts` ì‘ì„±
- [ ] `useForm.test.ts` ì‘ì„±
- [ ] `useFocusTrap.test.ts` ì‘ì„±
- [ ] `useAppState.test.ts` ì‘ì„±
- [ ] `useBilling.test.ts` ì‘ì„±
- [ ] `useExams.test.ts` ì‘ì„±
- [ ] ì»¤ë²„ë¦¬ì§€ í™•ì¸ (ëª©í‘œ: hooks 80%)

### Phase 2: ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

- [ ] `tests/components/` í´ë” êµ¬ì¡° ìƒì„±
- [ ] Mock ì„¤ì • (`tests/mocks/`) í™•ì¥
- [ ] `Modal.test.tsx` ì‘ì„±
- [ ] `Button.test.tsx` ì‘ì„±
- [ ] `StudentCard.test.tsx` ì‘ì„±
- [ ] `AttendanceTable.test.tsx` ì‘ì„±
- [ ] ì»¤ë²„ë¦¬ì§€ í™•ì¸ (ëª©í‘œ: ì „ì²´ 75%)

### Phase 3: í†µí•© í…ŒìŠ¤íŠ¸

- [ ] `tests/integration/` í´ë” ìƒì„±
- [ ] `auth-flow.test.ts` ì‘ì„±
- [ ] `student-registration.test.ts` ì‘ì„±
- [ ] ì»¤ë²„ë¦¬ì§€ í™•ì¸ (ëª©í‘œ: ì „ì²´ 80%)

---

## ğŸƒ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test

# íŠ¹ì • íŒŒì¼ í…ŒìŠ¤íŠ¸
npm run test -- useAuth.test.ts

# ì»¤ë²„ë¦¬ì§€ í™•ì¸
npm run test:coverage

# UI ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸
npm run test:ui

# íŠ¹ì • í´ë”ë§Œ í…ŒìŠ¤íŠ¸
npm run test -- tests/hooks/

# Watch ëª¨ë“œ
npm run test -- --watch
```

---

## ğŸ“ˆ ì˜ˆìƒ ê²°ê³¼

| ë‹¨ê³„ | ì™„ë£Œ í›„ ì»¤ë²„ë¦¬ì§€ |
|------|-----------------|
| í˜„ì¬ | 60.63% |
| Phase 1 ì™„ë£Œ | ~70% |
| Phase 2 ì™„ë£Œ | ~78% |
| Phase 3 ì™„ë£Œ | **80%+** âœ… |

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **Firebase Mock**: ëª¨ë“  Firebase í˜¸ì¶œì€ Mock ì²˜ë¦¬ í•„ìš”
2. **React Query**: QueryClient Provider ë˜í•‘ í•„ìš”
3. **ë¹„ë™ê¸° ì‘ì—…**: `waitFor`, `act` ì ì ˆíˆ ì‚¬ìš©
4. **ì •ë¦¬ ì‘ì—…**: `beforeEach`ì—ì„œ mock ì´ˆê¸°í™”

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-02-07  
**ì‘ì„±ì**: Claude Code Assistant

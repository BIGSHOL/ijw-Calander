# 수학 시간표 미표시 및 데이터 오류 해결 보고서

## 1. 개요
새로운 데이터 구조(Enrollments)로 마이그레이션 후 수학 시간표가 보이지 않는 문제와, 이후 발생한 데이터 중복 표시 문제를 해결했습니다.

## 2. 문제 원인 및 해결 과정

### 2.1. 시간표 미표시 (Critical)
*   **증상**: 데이터는 117개가 로드되었으나 시간표 화면에는 아무것도 표시되지 않음.
*   **원인**:
    *   데이터베이스(`enrollment`)에는 과목 코드가 영문 소문자 **`math`** 로 저장됨.
    *   시간표 필터(`TimetableManager`)는 한글 **`수학`** 으로 필터링을 수행함.
    *   이 불일치로 인해 모든 데이터가 필터링되어 사라짐.
*   **조치**:
    *   `useTimetableClasses.ts` 수정: 데이터를 로드할 때 `subject`가 `math`인 경우 자동으로 `수학`으로 변환하여 매핑하도록 로직 추가.

### 2.2. 시간표 매칭 실패
*   **증상**: 일부 수업이 해당 교시에 표시되지 않음.
*   **원인**:
    *   데이터의 스케줄 문자열(`수 1-1`)과 그리드의 타임 슬롯(`수 1`) 간의 형식 차이 및 공백 문제.
*   **조치**:
    *   `gridUtils.ts` 수정: 공백을 모두 제거하고 접두사(prefix) 매칭을 허용하여 `수 1-1`이 `수 1` 교시에 정상적으로 매칭되도록 강화.

### 2.3. 학생 이름 중복 및 콘솔 에러
*   **증상**: 시간표 카드 내에 동일한 학생 이름이 여러 번 반복되고, 콘솔에 `duplicate key` 에러 발생.
*   **원인**:
    *   `useEnrollments.ts`에서 데이터를 병합할 때, 이미 목록에 있는 학생 ID인지 확인하지 않고 무조건 추가함.
*   **조치**:
    *   `useEnrollments.ts` 수정: `studentList`에 추가하기 전에 중복 여부(`some`)를 체크하도록 로직 개선.

## 3. 결론
모든 기술적 원인이 해결되었으며, 현재 시간표가 정상적으로 표시되고 있습니다.
- **새로고침(F5)** 후 확인하시면, 깨끗한 상태의 시간표를 보실 수 있습니다.

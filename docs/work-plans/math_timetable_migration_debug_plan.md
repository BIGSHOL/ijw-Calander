# 수학 시간표 마이그레이션 디버깅 및 수정 계획

## 1. 문제 상황
- **증상**: 새로운 데이터 구조로 전환 시, 수학 시간표가 비어 있는 상태로 표시됨.
- **현상**: 학생 프로필에는 enrollment가 정상적으로 생성되었으나, 시간표 그리드에 수업이 배치되지 않음.
- **원인 분석**:
  - 마이그레이션된 `enrollments` 문서의 `schedule` 필드가 빈 배열(`[]`)로 저장됨.
  - 브라우저 검증 결과, 기존 `수업목록` 데이터에는 `["월 1-1", "월 1-2", ...]` 형식의 올바른 시간표 데이터가 존재함.
  - 마이그레이션 스크립트(`scripts/migrateToEnrollments.ts`)가 원본 데이터에서 `schedule` 필드를 제대로 읽어오지 못하고 있음.

## 2. 해결 목표
- 마이그레이션 스크립트가 `수업목록` 컬렉션의 시간표 데이터를 정확히 읽어서 `schedule` 필드에 저장하도록 수정.
- 최종적으로 새로운 데이터 구조에서 수학 시간표가 정상적으로 렌더링되도록 함.

## 3. 상세 수행 계획

### 단계 1: 데이터 구조 확인을 위한 로깅 추가
현재 스크립트는 단순히 `classData.schedule`을 읽고 있지만, 실패하고 있습니다. 정확한 필드명을 확인하기 위해 디버그 로그를 추가합니다.

- **대상 파일**: `scripts/migrateToEnrollments.ts`
- **수정 내용**:
  - `수업목록` 문서를 읽을 때, 전체 데이터 구조(`keys`)를 로그로 출력.
  - `schedule`, `time`, `slots` 등 시간표와 관련된 필드가 있는지 확인하는 로직 추가.
  - `any` 타입을 최소화하고 데이터 구조를 명확히 함.

### 단계 2: 스크립트 실행 및 로그 분석
- 수정된 스크립트를 실행하여 콘솔에 출력되는 로그를 분석합니다.
- `수업목록` 문서의 실제 데이터 구조를 파악하고, 시간표 데이터가 어떤 필드에 저장되어 있는지 확인합니다.

### 단계 3: 마이그레이션 로직 수정
- 확인된 데이터 구조에 맞춰 스크립트를 수정합니다.
  - 예: `schedule` 필드명이 다르다면 해당 필드를 매핑.
  - 예: 데이터 형식이 다르다면 변환 로직 추가.

### 단계 4: 검증
- **스크립트 재실행**: 마이그레이션을 다시 수행합니다.
- **브라우저 확인**:
  - 설정 > 데이터 전환 토글 ON.
  - 수학 시간표가 정상적으로 표시되는지 확인.

## 4. 예상 소요 시간
- 스크립트 수정 및 분석: 10분
- 마이그레이션 실행 및 검증: 5분
